- version: 3e5fa04379b126b851c8126fa23ca055e7e8d848
  profiles: ["linux-x86_64", "linux-x86_64-dev"]
  trigger: [webrtc-signalling]

- name: webrtc-signalling
  mode: docker
  profiles:
    - linux-x86_64
  before_script:
    - apk add py3-pip  && pip install conan
    - conan config install $CONAN_CONFIG_URL -sf $CONAN_CONFIG_DIR
    - conan user $CONAN_LOGIN_USERNAME -p $CONAN_LOGIN_PASSWORD -r $CONAN_REPO_ALL
    - conan user $CONAN_LOGIN_USERNAME -p $CONAN_LOGIN_PASSWORD -r $CONAN_REPO_DEV_ALL
    - conan config set general.default_profile=linux-x86_64
    - conan install webrtcsink/${CI_COMMIT_REF_NAME}@ -if webrtcsink
  docker:
    file: linux-x86_64.Dockerfile
